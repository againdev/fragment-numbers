{"version":3,"file":"static/js/792.e3442895.chunk.js","mappings":"4SAaA,MAAMA,EAAgBC,EAAAA,MAAW,IAAM,iCA8CvC,EA7CiBC,KACb,MAAMC,GAASC,EAAAA,EAAAA,OACT,IAAEC,EAAG,WAAEC,IAAeC,EAAAA,EAAAA,MACtBC,GAAMC,EAAAA,EAAAA,QAAO,OACXC,UAAWC,EAAcC,cAAeC,EAAkBC,YAAaC,EAAgBC,mBAAoBC,EAAuBC,KAAMC,IAAcC,EAAAA,EAAAA,kBAAiB,CAC3KC,SAAU,CAAClB,EAAOmB,WAAYC,EAAAA,GAASC,SAAU,OACjDC,QAASC,IAAA,IAAC,UAAEC,GAAuBD,EAAA,OAAK,IAAIE,EAAAA,IAAYvB,EAAIwB,UAAUC,iBAAiB,CACnFC,UAAW5B,EAAOmB,WAClBU,MAAO,GACPC,SAAUN,EACVO,aAAa,GACf,EACFC,iBAAkBC,GAAaA,EAASC,SAAW,EAAID,EAASC,cAAWC,IAmBzEtB,EAAqBC,GAC3BsB,EAAAA,EAAAA,GAAaxB,EAAgBC,EAAoBH,EAAkBP,EAAYE,GAE/E,MAAMgB,GAAWgB,EAAAA,EAAAA,UAAQ,KACdC,EAAAA,EAAAA,GAAuBtB,OAAWmB,IAC1C,CAACnB,IACJ,OAAKR,EAGmB,IAApBa,EAASkB,QACDC,EAAAA,EAAAA,KAAKC,EAAAA,SAAU,CAAEC,UAAUF,EAAAA,EAAAA,KAAKG,EAAAA,GAAsB,CAAC,GAAIC,UAAUJ,EAAAA,EAAAA,KAAK3C,EAAe,CAAC,MAE9FgD,EAAAA,EAAAA,MAAMC,EAAAA,SAAW,CAAEF,SAAU,EAACJ,EAAAA,EAAAA,KAAKO,EAAAA,GAAgB,CAAC,IAAIF,EAAAA,EAAAA,MAAMG,EAAAA,GAAW,CAAE3C,IAAKA,EAAKuC,SAAU,EAACJ,EAAAA,EAAAA,KAAKS,EAAAA,EAAoB,CAAEC,MAAO7B,IAAaR,IAAsB2B,EAAAA,EAAAA,KAAKW,EAAAA,GAAwB,CAAEC,KAAM,WALvMZ,EAAAA,EAAAA,KAAKG,EAAAA,GAAsB,CAAC,EAKuL,C","sources":["../../../packages/uikit/dist/pages/activity/Activity.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useInfiniteQuery } from '@tanstack/react-query';\nimport { AccountsApi } from '@tonkeeper/core/dist/tonApiV2';\nimport React, { Suspense, useMemo, useRef } from 'react';\nimport { InnerBody } from '../../components/Body';\nimport { ActivityHeader } from '../../components/Header';\nimport { ActivitySkeletonPage, SkeletonListWithImages } from '../../components/Skeleton';\nimport { MixedActivityGroup } from '../../components/activity/ActivityGroup';\nimport { useAppContext } from '../../hooks/appContext';\nimport { useFetchNext } from '../../hooks/useFetchNext';\nimport { QueryKey } from '../../libs/queryKey';\nimport { getMixedActivityGroups } from '../../state/mixedActivity';\nimport { useActiveWallet } from '../../state/wallet';\nconst EmptyActivity = React.lazy(() => import('../../components/activity/EmptyActivity'));\nconst Activity = () => {\n    const wallet = useActiveWallet();\n    const { api, standalone } = useAppContext();\n    const ref = useRef(null);\n    const { isFetched: isTonFetched, fetchNextPage: fetchTonNextPage, hasNextPage: hasTonNextPage, isFetchingNextPage: isTonFetchingNextPage, data: tonEvents } = useInfiniteQuery({\n        queryKey: [wallet.rawAddress, QueryKey.activity, 'all'],\n        queryFn: ({ pageParam = undefined }) => new AccountsApi(api.tonApiV2).getAccountEvents({\n            accountId: wallet.rawAddress,\n            limit: 20,\n            beforeLt: pageParam,\n            subjectOnly: true\n        }),\n        getNextPageParam: lastPage => (lastPage.nextFrom > 0 ? lastPage.nextFrom : undefined)\n    });\n    // const {\n    //     isFetched: isTronFetched,\n    //     data: tronEvents,\n    //     isFetchingNextPage: isTronFetchingNextPage,\n    //     hasNextPage: hasTronNextPage,\n    //     fetchNextPage: fetchTronNextPage\n    // } = useInfiniteQuery({\n    //     queryKey: [wallet.tron?.ownerWalletAddress, wallet.network, QueryKey.tron],\n    //     queryFn: ({ pageParam = undefined }) =>\n    //         new TronApi(api.tronApi).getTransactions({\n    //             ownerAddress: wallet.tron!.ownerWalletAddress,\n    //             fingerprint: pageParam,\n    //             limit: 100\n    //         }),\n    //     getNextPageParam: lastPage => lastPage.fingerprint,\n    //     enabled: wallet.tron !== undefined\n    // });\n    const isFetchingNextPage = isTonFetchingNextPage;\n    useFetchNext(hasTonNextPage, isFetchingNextPage, fetchTonNextPage, standalone, ref);\n    //  useFetchNext(hasTronNextPage, isFetchingNextPage, fetchTronNextPage, standalone, ref);\n    const activity = useMemo(() => {\n        return getMixedActivityGroups(tonEvents, undefined);\n    }, [tonEvents]);\n    if (!isTonFetched) {\n        return _jsx(ActivitySkeletonPage, {});\n    }\n    if (activity.length === 0) {\n        return (_jsx(Suspense, { fallback: _jsx(ActivitySkeletonPage, {}), children: _jsx(EmptyActivity, {}) }));\n    }\n    return (_jsxs(_Fragment, { children: [_jsx(ActivityHeader, {}), _jsxs(InnerBody, { ref: ref, children: [_jsx(MixedActivityGroup, { items: activity }), isFetchingNextPage && _jsx(SkeletonListWithImages, { size: 3 })] })] }));\n};\nexport default Activity;\n"],"names":["EmptyActivity","React","Activity","wallet","useActiveWallet","api","standalone","useAppContext","ref","useRef","isFetched","isTonFetched","fetchNextPage","fetchTonNextPage","hasNextPage","hasTonNextPage","isFetchingNextPage","isTonFetchingNextPage","data","tonEvents","useInfiniteQuery","queryKey","rawAddress","QueryKey","activity","queryFn","_ref","pageParam","AccountsApi","tonApiV2","getAccountEvents","accountId","limit","beforeLt","subjectOnly","getNextPageParam","lastPage","nextFrom","undefined","useFetchNext","useMemo","getMixedActivityGroups","length","_jsx","Suspense","fallback","ActivitySkeletonPage","children","_jsxs","_Fragment","ActivityHeader","InnerBody","MixedActivityGroup","items","SkeletonListWithImages","size"],"sourceRoot":""}