"use strict";(self.webpackChunk_tonkeeper_extension=self.webpackChunk_tonkeeper_extension||[]).push([[259],{89259:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ee});var i=t(80184),o=t(14182),a=t(76978),s=t(1849),r=t(48544),l=t(18203),c=t(93853),u=t(34692),d=t(72791),m=t(4959),p=t(73485),h=t(87594),x=t(23098),v=t(42770),f=t(61945),j=t(82430),g=t(7393),k=t(35300),b=t(89242),y=t(68973),w=t(97667),V=t(38705);const E=e=>{let{isMax:n,...t}=e;const o=(0,y.g)(t.recipient,t.assetAmount,n),a=(0,w.N)(t.recipient,t.assetAmount,n,o.data);return(0,i.jsx)(V.vp,{estimation:o,...a,...t})};var C,R=t(80572),_=t(144),M=t(61819),S=t(87812),A=t(57443),Z=t(91153),F=t(73643),O=t(47712),B=t(30168),N=t(65867);const P=N.ZP.input(C||(C=(0,B.Z)(["\n    padding: 0;\n    margin: 0;\n    border: none;\n    outline: none;\n    /* added styles */\n    font-family: inherit;\n    font-size: inherit;\n    background: transparent;\n    color: ",";\n\n    font-family: 'Montserrat', sans-serif;\n    font-style: normal;\n    font-weight: 600;\n\n    line-height: 49px;\n    text-align: right;\n\n    -moz-appearance: textfield;\n\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n    }\n"])),(e=>e.theme.textPrimary)),L=d.forwardRef(((e,n)=>{let{value:t,setValue:o,inputSize:a}=e;return(0,i.jsx)(P,{autoComplete:"off",id:"sentence",ref:n,style:{fontSize:"".concat(a.size,"px"),width:"".concat(a.width,"px")},inputMode:"decimal",type:"text",value:t,onChange:e=>{o(e.target.value)}})}));L.displayName="Sentence";var T,W,z,H,D,U,J=t(12850),q=t(79309),$=t(5784),G=t(26503);const I=N.ZP.div(T||(T=(0,B.Z)(["\n    background: ",";\n    border-radius: ",";\n    padding: 0.5rem 1rem;\n    display: flex;\n    gap: 0.5rem;\n"])),(e=>e.theme.buttonTertiaryBackground),(e=>e.theme.cornerMedium)),Q=N.ZP.span(W||(W=(0,B.Z)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n"])),(e=>e.theme.iconSecondary)),X=N.ZP.img(z||(z=(0,B.Z)(["\n    border-radius: ",";\n    width: 24px;\n    height: 24px;\n"])),(e=>e.theme.cornerFull)),K=N.ZP.div(H||(H=(0,B.Z)(["\n    display: flex;\n    gap: 0.5rem;\n    width: 200px;\n    overflow: hidden;\n"]))),Y=(0,N.ZP)(O.mI)(D||(D=(0,B.Z)(["\n    color: ",";\n    text-overflow: ellipsis;\n    overflow: hidden;\n"])),(e=>e.theme.textSecondary)),ee=N.ZP.span(U||(U=(0,B.Z)(["\n    padding-left: 0.5rem;\n    color: ",";\n    display: flex;\n"])),(e=>e.theme.accentBlue)),ne=e=>{var n;let{onClose:t,jetton:a,jettons:s,setJetton:r,info:l}=e;const c=(0,M.rs)(),u=(0,d.useRef)(null);return(0,d.useEffect)((()=>{var e;u.current&&(null===(e=u.current.parentElement)||void 0===e||null===(e=e.parentElement)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[u]),(0,i.jsxs)(G.L8,{margin:!1,dropDown:!0,children:[(0,i.jsx)(G.HC,{dropDown:!0,onClick:()=>{r(o.C.TON),t()},children:(0,i.jsxs)(G.me,{children:[(0,i.jsxs)(K,{children:[(0,i.jsx)(X,{src:"https://wallet.tonkeeper.com/img/toncoin.svg"}),(0,i.jsx)(O.RV,{children:o.C.TON}),(0,i.jsx)(Y,{children:c(null!==(n=null===l||void 0===l?void 0:l.balance)&&void 0!==n?n:0)})]}),o.C.TON===a?(0,i.jsx)(ee,{children:(0,i.jsx)($.qw,{})}):void 0]})}),s.balances.map((e=>(0,i.jsx)(G.HC,{dropDown:!0,onClick:()=>{r(e.jetton.address),t()},children:(0,i.jsxs)(G.me,{children:[(0,i.jsxs)(K,{children:[(0,i.jsx)(X,{src:e.jetton.image}),(0,i.jsx)(O.RV,{children:e.jetton.symbol}),(0,i.jsx)(Y,{children:c(e.balance,e.jetton.decimals)})]}),e.jetton.address===a?(0,i.jsx)(ee,{ref:u,children:(0,i.jsx)($.qw,{})}):void 0]})},e.jetton.address)))]})},te=e=>{let{jetton:n,jettons:t,setJetton:o,info:a}=e;return(0,i.jsx)(q.vb,{center:!0,payload:e=>(0,i.jsx)(ne,{info:a,onClose:e,jetton:n,jettons:t,setJetton:o}),children:(0,i.jsxs)(I,{children:[(0,i.jsx)(O.RV,{children:(0,_.TB)(n,t)}),(0,i.jsx)(Q,{children:(0,i.jsx)($.KL,{})})]})})};var ie=t(81987);const oe=(e,n)=>{const{ios:t,standalone:i}=(0,h.bp)();(0,d.useEffect)((()=>{if(!t)return;const o=window.innerHeight;function a(){const t=e.current;if(!t)return;const a=o-this.height+16,s=i?Math.max(32,a):a;t.style.bottom="".concat(s,"px");const r=Math.min(this.height-16-56-16-36-16-16-16-16-37,272);n.current&&(n.current.style.height="".concat(r,"px"))}const s=window.visualViewport;return s&&(setTimeout((()=>a.call(s)),300),s.addEventListener("resize",a)),()=>{!function(){const n=window.visualViewport;n&&n.removeEventListener("resize",a),setTimeout((()=>{const n=e.current;n&&(n.style.bottom=null)}))}()}}),[e.current,n.current])},ae={size:40,width:30};var se=t(27494);function re(e){return e.toFormat({groupSeparator:(0,se.ce)(),decimalSeparator:(0,se.Yz)()})}const le=(e,n)=>{const{kind:t,payload:i}=n;switch(t){case"select":return{inputValue:"0",coinValue:new u.Z(0),token:i.token,inFiat:!1,isMax:!1};case"max":if(void 0!==i.prices){const n=i.value.multipliedBy(i.prices).decimalPlaces(2,u.Z.ROUND_FLOOR);return{...e,inputValue:re(e.inFiat?n:i.value),fiatValue:n,coinValue:i.value,isMax:!e.isMax}}return{...e,inputValue:re(i.value),coinValue:i.value,isMax:!e.isMax};case"input":{var o,a;const n=e.inFiat?2:e.token.decimals;let t=(0,J.VI)(i.value);(0,J.vu)(t,n)||(t=e.inputValue),(0,_.kE)(t)&&(t=(0,_.z6)(t));const s=(0,J.NU)(t),r=e.inFiat?s.div(null!==(o=i.prices)&&void 0!==o?o:0):s,l=e.inFiat?s:s.multipliedBy(null!==(a=i.prices)&&void 0!==a?a:0);return{...e,inputValue:t,coinValue:r,fiatValue:l,isMax:!1}}case"price":{if(!i.prices)return e;const n=e.coinValue.multipliedBy(i.prices).decimalPlaces(2,u.Z.ROUND_FLOOR);return{...e,fiatValue:n}}case"toggle":{var s,r;const n=re(e.inFiat?e.coinValue.decimalPlaces(e.token.decimals,u.Z.ROUND_FLOOR):null!==(s=null===(r=e.fiatValue)||void 0===r?void 0:r.decimalPlaces(2,u.Z.ROUND_FLOOR))&&void 0!==s?s:new u.Z(0));return{...e,inputValue:n,inFiat:!e.inFiat}}default:return e}},ce=e=>{let{recipient:n,onClose:t,onBack:a,onConfirm:l,defaults:c,MainButton:m,HeaderBlock:p,isAnimationProcess:v}=e;const{t:k}=(0,f.$G)(),y=(0,x._H)(),{standalone:w,fiat:V}=(0,h.bp)(),E=n.address.blockchain,C=(0,j.c)()&&v,{data:R}=(0,g.NR)(),{data:B}=(0,Z.IR)(),[N,P]=(0,d.useReducer)(le,((e,n)=>{var t,i,a,r;const l=null!==(t=null===e||void 0===e?void 0:e.inFiat)&&void 0!==t&&t;return{inputValue:null!==(i=null===e||void 0===e?void 0:e.inputValue)&&void 0!==i?i:re((l?null===e||void 0===e?void 0:e.fiatValue:null===e||void 0===e?void 0:e.coinValue)||new u.Z(0)),coinValue:null!==(a=null===e||void 0===e?void 0:e.coinValue)&&void 0!==a?a:new u.Z(0),fiatValue:null===e||void 0===e?void 0:e.fiatValue,token:(null===e||void 0===e?void 0:e.token)||(n===o.S.TON?s.Ct:s.tr),inFiat:l,isMax:null!==(r=null===e||void 0===e?void 0:e.isMax)&&void 0!==r&&r}})(c,E)),{data:T,isLoading:W}=(0,A.UJ)((e=>e.token.blockchain===o.S.TRON?e.token.symbol:(0,r.mi)(e.token,{userFriendly:!0}))(N)),{data:z,isLoading:H}=(0,S.t6)(N.token),D=(0,d.useRef)(null),U=(0,d.useRef)(null),q=(0,d.useRef)(null);oe(q,U),((e,n)=>{(0,d.useEffect)((()=>{const n=setTimeout((()=>{e.current&&e.current.focus()}),300);return()=>{clearTimeout(n)}}),[e.current,n])})(D,N.token);const[$,G]=(0,d.useState)(ae);(0,d.useLayoutEffect)((()=>{U.current&&G(((e,n)=>{const t=n.clientWidth;let i=ae.size,o=(0,ie.m)(e,"600 ".concat(i,"px 'Montserrat'"));for(;Math.round(o)>t-115;)i=Math.max(1,i-1),o=(0,ie.m)(e,"600 ".concat(i,"px 'Montserrat'"));return{width:Math.max(Math.round(o)+5,6*e.length,30),size:i}})(N.inputValue,U.current))}),[U.current,N.inputValue]),(0,d.useEffect)((()=>{P({kind:"price",payload:{prices:null===T||void 0===T?void 0:T.prices}})}),[P,T]);const I=(0,d.useCallback)((()=>{P({kind:"toggle",payload:void 0})}),[]),Q=(0,d.useCallback)((e=>{P({kind:"input",payload:{value:e,prices:null===T||void 0===T?void 0:T.prices}})}),[P,T]),X=(0,d.useCallback)((()=>{P({kind:"max",payload:{value:z.relativeAmount,prices:null===T||void 0===T?void 0:T.prices}})}),[P,z,T]),K=(0,d.useCallback)((e=>{R&&P({kind:"select",payload:{token:(0,r.Px)(e,R)}})}),[P,R]),Y=z.relativeAmount.minus(N.coinValue),ee=Y.gte(0),ne=(0,d.useMemo)((()=>ee&&(0,_.kE)(N.inputValue)&&(0,J.NU)(N.inputValue).isGreaterThan(0)),[ee,N.inputValue]),se=(0,d.useCallback)((()=>{a(N)}),[a,N]),ce=(0,d.useCallback)((()=>{ne?l(N):y.hapticNotification("error")}),[ne,l,N,y]);return(0,i.jsxs)(b.r4,{onSubmit:async e=>{e.stopPropagation(),e.preventDefault(),ce()},standalone:w,children:[!C&&(0,i.jsx)(b.JE,{children:(0,i.jsx)(b.O$,{children:(0,i.jsx)(p,{onClose:t,onBack:se,children:(0,i.jsxs)(J.DK,{children:[k("send_screen_steps_done_to").replace("%{name}",""),(0,i.jsx)(J.XT,{recipient:n}),(0,i.jsx)(J.b9,{recipient:n})]})})})}),(0,i.jsxs)(J.wU,{ref:U,children:[(0,i.jsx)(J.je,{children:E===o.S.TON?(0,i.jsx)(te,{info:B,jetton:(0,r.mi)(N.token),setJetton:K,jettons:null!==R&&void 0!==R?R:{balances:[]}}):(0,i.jsx)(J.bx,{children:(0,i.jsx)(O.RV,{children:"TRC20"})})}),(0,i.jsxs)(J.S7,{children:[(0,i.jsx)(L,{ref:D,value:N.inputValue,setValue:Q,inputSize:$}),(0,i.jsx)(J.mN,{children:N.inFiat?V:N.token.symbol})]}),(0,i.jsx)(J.t$,{amountState:N,toggleFiat:I})]}),(0,i.jsxs)(J.X$,{children:[(0,i.jsx)(J.ER,{maxValue:N.isMax,onClick:X,children:k("send_screen_steps_amount_max")}),ee?(0,i.jsxs)(J.JD,{children:[k("send_screen_steps_amount_remaining").replace("%{amount}",M.zW.format(Y,{decimals:N.token.decimals}))," ",N.token.symbol]}):(0,i.jsx)(J.rL,{children:k("send_screen_steps_amount_insufficient_balance")})]}),(0,i.jsx)(F.Zv,{}),!C&&(0,i.jsx)(b.gH,{children:(0,i.jsx)(b.B6,{children:(0,i.jsx)(m,{ref:q,isDisabled:!ne,isLoading:W||H,onClick:ce})})})]})};var ue=t(98502),de=t(3182),me=t(60560),pe=t(41235),he=t(2339),xe=t(97938),ve=t(34450);var fe=t(33455),je=t(8676),ge=t(86871);var ke,be=t(87294);const ye=(0,N.zo)(be.G)(ke||(ke=(0,B.Z)(["\n    margin-bottom: 1rem;\n"]))),we=e=>{var n;let{isMax:t,ttl:o,...r}=e;const{signerWallet:l}=(0,me.h3)(),{data:c}=(0,me.F)(),u=function(e,n,t){const{api:i}=(0,h.bp)(),o=(0,Z.vz)(),r=(0,Z.Mu)(),{data:l}=(0,me.F)(),c=(0,ve.y)(l),{data:u}=(0,g.NR)();return(0,pe.useMutation)((async()=>{const{signerWallet:l}=(0,me.FX)(o,r),d=await c;if(!d)throw new Error("Multisig not found");let m;if(n.asset.id===s.Ct.id)m=await(0,xe.Em)({api:i,hostWallet:l,recipient:e,multisig:d,weiAmount:n.weiAmount,isMax:t});else{const t=u.balances.find((e=>n.asset.address.toRawString()===e.jetton.address));m=await(0,he.xu)({api:i,hostWallet:l,recipient:e,multisig:d,amount:n,jettonWalletAddress:t.walletAddress.address})}return{fee:new a.n({weiAmount:-1*m.event.extra,asset:s.Ct}),payload:m}}))}(r.recipient,r.assetAmount,t),m=function(e,n,t,i,o){const{t:a}=(0,f.$G)(),r=(0,x._H)(),{api:l}=(0,h.bp)(),{signerWallet:c,signerAccount:u}=(0,me.h3)(),{data:d}=(0,me.F)(),m=(0,ve.y)(d),p=(0,pe.useQueryClient)(),v=(0,fe.BJ)(),{data:j}=(0,g.NR)(),{mutateAsync:k}=(0,je.Ug)(),{mutateAsync:b}=(0,Z.x_)();return(0,pe.useMutation)((async()=>{try{const a=60*Number(i),d=await(0,ge.TC)(r,u.id,k,{walletId:c.id}).catch((()=>null));if(null===d)throw new Error("Signer not found");const p=await m;if(!p)throw new Error("Multisig not found");if(n.asset.id===s.Ct.id)v("send-ton"),await(0,xe.h_)({api:l,hostWallet:c,recipient:e,multisig:p,weiAmount:n.weiAmount,isMax:t,fee:o,signer:d,ttlSeconds:a});else{v("send-jetton");const t=j.balances.find((e=>n.asset.address.toRawString()===e.jetton.address));await(0,he.HO)({api:l,hostWallet:c,recipient:e,multisig:p,amount:n,jettonWalletAddress:t.walletAddress.address,signer:d,ttlSeconds:a,fee:o})}}catch(d){await(0,ue.cB)(p,r,a,d)}return await b(),!0}))}(r.recipient,r.assetAmount,t,o,null===(n=u.data)||void 0===n?void 0:n.payload);return(0,d.useEffect)((()=>{u.mutate()}),[u.mutate]),(0,i.jsx)(V.vp,{estimation:u,...m,...r,children:(0,i.jsx)(V.ud,{children:c?(0,i.jsx)(ye,{status:"progress",signedWallets:[],threshold:c.threshold,pendingWallets:c.signers,hostAddress:l.rawAddress,secondsLeft:60*Number(o)}):null})})},Ve=e=>{let{onClose:n,chain:t,initRecipient:y,initAmountState:w}=e;const C=(0,x._H)(),{standalone:_,ios:M,extension:S}=(0,h.bp)(),{t:A}=(0,f.$G)(),{data:Z}=(0,g.NR)(),F=(0,j.c)(),O=(0,me.IW)(),B=(0,fe.yL)(),[N,P]=(0,d.useState)(O?"multisig-settings":"recipient"),L=(0,d.useCallback)((e=>{O||"multisig-settings"!==e||(e="recipient"),P(e)}),[P,O]),[T,W]=(0,d.useState)(!0),[z,H]=(0,d.useState)(),[D,U]=(0,d.useState)(y),[J,q]=(0,d.useState)(w);(0,d.useEffect)((()=>{var e,n;y&&B("send_click",{from:"send_amount",token:null!==(e=null===J||void 0===J||null===(n=J.token)||void 0===n?void 0:n.symbol)&&void 0!==e?e:"ton"})}),[]);const{data:$}=(0,k.Ru)(),{mutateAsync:G,isLoading:I}=(0,R.gW)(),Q=e=>{var n,t;null!==J&&void 0!==J&&null!==(n=J.token)&&void 0!==n&&n.blockchain&&(null===J||void 0===J||null===(t=J.token)||void 0===t?void 0:t.blockchain)!==e.address.blockchain&&q(void 0),U(e),$&&e.address.blockchain===o.S.TRON&&q({token:(0,s.FZ)($.balances[0])})},X=e=>{var n,t;W(!0),Q(e),L("amount"),B("send_click",{from:"send_recipient",token:null!==(n=null===J||void 0===J||null===(t=J.token)||void 0===t?void 0:t.symbol)&&void 0!==n?n:"ton"})},K=e=>{var n,t;W(!0),q(e),L("confirm"),B("send_confirm",{from:"send_amount",token:null!==(n=null===J||void 0===J||null===(t=J.token)||void 0===t?void 0:t.symbol)&&void 0!==n?n:"ton"})},Y=e=>{W(!1),q(e),L("recipient")},ee=()=>{M&&(0,v.Q)("decimal"),W(!1),L("amount")},ne=(0,d.useCallback)((async e=>{let{amount:n,jetton:t}=e;if(t&&Z){let e;try{e=(0,r.Px)(t,Z)}catch(i){return C.uiEvents.emit("copy",{method:"copy",params:A("Unexpected_QR_Code")}),!1}const o=new a.n({asset:e,weiAmount:n||"0"});q({coinValue:o.relativeAmount,token:e,inFiat:!1,isMax:!1})}else q({coinValue:n?(0,c.PE)(n):new u.Z("0"),token:null===w||void 0===w?void 0:w.token,inFiat:!1,isMax:!1});return!0}),[C,Z,null===w||void 0===w?void 0:w.token]),te=async e=>{const n=(0,l.p)({url:e});if(!n)return C.uiEvents.emit("copy",{method:"copy",params:A("Unexpected_QR_Code")});await ne(n)&&await(async e=>{let{address:n,text:t}=e;const i={address:n,blockchain:o.S.TON},a=await G(i),s=!a.memoRequired||!(!a.memoRequired||!t);Q({address:i,toAccount:a,comment:null!==t&&void 0!==t?t:"",done:s}),s&&L("amount")})(n)},ie={"multisig-settings":(0,d.useRef)(null),recipient:(0,d.useRef)(null),amount:(0,d.useRef)(null),confirm:(0,d.useRef)(null)}[N];return(0,i.jsx)(ue.im,{standalone:_,extension:S,children:(0,i.jsx)(m.Z,{childFactory:(0,ue.mH)(T),children:(0,i.jsx)(p.Z,{nodeRef:ie,classNames:"right-to-left",addEndListener:e=>{setTimeout(e,ue.x9)},children:e=>(0,i.jsxs)("div",{ref:ie,children:["multisig-settings"===N&&(0,i.jsx)(de.d,{onSubmit:e=>{W(!0),H(e.lifetime),L("recipient")},isAnimationProcess:"exiting"===e,Header:()=>(0,i.jsx)(ue.io,{title:A("multisig_create_order_title"),onClose:n}),MainButton:ue.c7}),"recipient"===N&&(0,i.jsx)(R.Aq,{data:D,setRecipient:X,onScan:te,keyboard:"decimal",isExternalLoading:I,acceptBlockchains:t?[t]:void 0,MainButton:ue.c7,HeaderBlock:()=>(0,i.jsx)(ue.ap,{onBack:O?()=>{W(!1),L("multisig-settings")}:void 0,title:A("transaction_recipient"),onClose:n}),isAnimationProcess:"exiting"===e}),"amount"===N&&(0,i.jsx)(ce,{defaults:J,onClose:n,onBack:Y,recipient:D,onConfirm:K,MainButton:ue.Jy,HeaderBlock:ue.gI,isAnimationProcess:"exiting"===e}),"confirm"===N&&(O?(0,i.jsxs)(we,{onClose:n,onBack:ee,recipient:D,assetAmount:a.n.fromRelativeAmount({asset:J.token,amount:J.coinValue}),isMax:J.isMax,ttl:z,children:["exiting"!==e&&F&&(0,i.jsx)(V.tv,{children:(0,i.jsx)(b.JE,{children:(0,i.jsx)(b.O$,{children:(0,i.jsx)(V.NG,{})})})}),"exiting"!==e&&F&&(0,i.jsx)(V.mC,{children:(0,i.jsx)(b.gH,{children:(0,i.jsx)(b.B6,{children:(0,i.jsx)(V.uq,{MainButton:ue.y8})})})})]}):(0,i.jsxs)(E,{onClose:n,onBack:ee,recipient:D,assetAmount:a.n.fromRelativeAmount({asset:J.token,amount:J.coinValue}),isMax:J.isMax,children:["exiting"!==e&&F&&(0,i.jsx)(V.tv,{children:(0,i.jsx)(b.JE,{children:(0,i.jsx)(b.O$,{children:(0,i.jsx)(V.NG,{})})})}),"exiting"!==e&&F&&(0,i.jsx)(V.mC,{children:(0,i.jsx)(b.gH,{children:(0,i.jsx)(b.B6,{children:(0,i.jsx)(V.uq,{MainButton:ue.y8})})})})]}))]})},N)})})},Ee=()=>{const[e,n]=(0,d.useState)(!1),[t,o]=(0,d.useState)(void 0),[a,s]=(0,d.useState)(void 0),{data:r}=(0,g.NR)(),{mutateAsync:l,reset:c}=(0,R.gW)(),u=(0,x._H)(),m=(0,fe.yL)();(0,d.useEffect)((()=>{const e=e=>{c();const t=e.params;o(e.params.chain),t.address?l({address:t.address}).then((e=>{s((0,ue.Lq)(t,e,r)),n(!0)})):(s({initAmountState:(0,ue.ai)(t,r)}),n(!0)),m("send_open",{from:t.from})};return u.uiEvents.on("transfer",e),()=>{u.uiEvents.off("transfer",e)}}),[r,m]);const p=(0,d.useCallback)((()=>{s(void 0),n(!1)}),[]),h=(0,d.useCallback)((()=>{if(e)return(0,i.jsx)(Ve,{onClose:p,chain:t,initAmountState:null===a||void 0===a?void 0:a.initAmountState,initRecipient:null===a||void 0===a?void 0:a.initRecipient})}),[e,a,t]);return(0,i.jsx)(b.P_,{isOpen:e,handleClose:p,hideButton:!0,backShadow:!0,footer:(0,i.jsx)(i.Fragment,{}),children:h})}},4959:(e,n,t)=>{t.d(n,{Z:()=>p});var i=t(9116),o=t(29580);var a=t(61174),s=t(72791),r=t(99172);function l(e,n){var t=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=function(e){return n&&(0,s.isValidElement)(e)?n(e):e}(e)})),t}function c(e,n,t){return null!=t[n]?t[n]:e.props[n]}function u(e,n,t){var i=l(e.children),o=function(e,n){function t(t){return t in n?n[t]:e[t]}e=e||{},n=n||{};var i,o=Object.create(null),a=[];for(var s in e)s in n?a.length&&(o[s]=a,a=[]):a.push(s);var r={};for(var l in n){if(o[l])for(i=0;i<o[l].length;i++){var c=o[l][i];r[o[l][i]]=t(c)}r[l]=t(l)}for(i=0;i<a.length;i++)r[a[i]]=t(a[i]);return r}(n,i);return Object.keys(o).forEach((function(a){var r=o[a];if((0,s.isValidElement)(r)){var l=a in n,u=a in i,d=n[a],m=(0,s.isValidElement)(d)&&!d.props.in;!u||l&&!m?u||!l||m?u&&l&&(0,s.isValidElement)(d)&&(o[a]=(0,s.cloneElement)(r,{onExited:t.bind(null,r),in:d.props.in,exit:c(r,"exit",e),enter:c(r,"enter",e)})):o[a]=(0,s.cloneElement)(r,{in:!1}):o[a]=(0,s.cloneElement)(r,{onExited:t.bind(null,r),in:!0,exit:c(r,"exit",e),enter:c(r,"enter",e)})}})),o}var d=Object.values||function(e){return Object.keys(e).map((function(n){return e[n]}))},m=function(e){function n(n,t){var i,o=(i=e.call(this,n,t)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}(0,a.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var t,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(t=e,i=a,l(t.children,(function(e){return(0,s.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:c(e,"appear",t),enter:c(e,"enter",t),exit:c(e,"exit",t)})}))):u(e,o,a),firstRender:!1}},t.handleExited=function(e,n){var t=l(this.props.children);e.key in t||(e.props.onExited&&e.props.onExited(n),this.mounted&&this.setState((function(n){var t=(0,o.Z)({},n.children);return delete t[e.key],{children:t}})))},t.render=function(){var e=this.props,n=e.component,t=e.childFactory,o=(0,i.Z)(e,["component","childFactory"]),a=this.state.contextValue,l=d(this.state.children).map(t);return delete o.appear,delete o.enter,delete o.exit,null===n?s.createElement(r.Z.Provider,{value:a},l):s.createElement(r.Z.Provider,{value:a},s.createElement(n,o,l))},n}(s.Component);m.propTypes={},m.defaultProps={component:"div",childFactory:function(e){return e}};const p=m}}]);
//# sourceMappingURL=259.43995a8f.chunk.js.map